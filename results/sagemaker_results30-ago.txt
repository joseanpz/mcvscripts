___________________________________________________________________________________________________________

____________________________________________________________________________________________________________

hyperparameters = {
    "booster" : "gbtree",
    "max_depth" : "8",
    "gamma" : "0.8",
    "eta" : "0.1",
    "objective" : "binary:logistic",  #              'nthread' : 4,
    "silent" : "1",
    "eval_metric": "auc",
    "subsample" : "0.8",
    "colsample_bytree" : "0.8",
    "min_child_weight" : "0.2",
    "max_delta_step" : "2",
    "seed" : "1",
    "num_round": "200"
    # "nfold" =5  
}




------              	Train                    	Validation               	Test                     
confusion matrix    	[[245048    392]         	[[81093   504]           	[[81057   465]           
                    	 [   646   9414]]        	 [  969  2393]]          	 [  991  2315]]          
confusion matrix pct	[[0.95909198 0.00153425] 	[[0.9544957  0.00593227] 	[[0.95554534 0.00548168] 
                    	 [0.00252838 0.0368454 ]]	 [0.0114055  0.02816653]]	 [0.01168246 0.02729052]]
f1 score            	0.9477499244941107       	0.7646588911966767       	0.7607624055208675       
accuracy score      	0.9959373776908024       	0.9826622253086783       	0.9828358560852549       
recall score        	0.9357852882703778       	0.7117787031528852       	0.7002419842710224       
precision score     	0.96002447481134         	0.8260269244045564       	0.8327338129496403 


---------------------------------------------------------------------------------------------------------

0.0 0.07576442235276395
0.01 0.15002985480737982
0.02 0.20640121236699716
0.03 0.25208417102265107
0.04 0.292073433780178
0.05 0.3251584458528521
0.06 0.3541092792829832
0.07 0.3826570114314342
0.08 0.40616378774698647
0.09 0.4293371400867294
0.1 0.448646773074254
0.11 0.4648086624830811
0.12 0.4794636464232247
0.13 0.49253680363425206
0.14 0.5055652983071472
0.15 0.5159648137750328
0.16 0.5242998673843513
0.17 0.5318209438930525
0.18 0.5385486102377058
0.19 0.5449489463393439
0.2 0.5499572245486064
0.21 0.5523304493441251
0.22 0.5554064417177913
0.23 0.5562685093780849
0.24 0.55700972653664
0.25 0.5587311557788945
0.26 0.5577057089252212
0.27 0.5552317589486996
0.28 0.5515765765765765
0.29 0.5449625791594703
0.3 0.5395496876105151
0.31 0.5361691900985339
0.32 0.5300791071319065
0.33 0.5209779278434314
0.34 0.5117020598176136
0.35000000000000003 0.5010430247718384
0.36 0.4913586812018081
0.37 0.47946410447256244
0.38 0.4674466620784584
0.39 0.4570470736136331
0.4 0.4444444444444445
0.41000000000000003 0.43328281734863244
0.42 0.42402516643499893
0.43 0.4142327650111194
0.44 0.4018024784078107
0.45 0.39097744360902253
0.46 0.37500962945843924
0.47000000000000003 0.3622182357070431
0.48 0.3479361062786652
0.49 0.3344267541403312
0.5 0.3202720207253886
0.51 0.3052070520705207
0.52 0.28908065051443743
0.53 0.27700041893590277
0.54 0.2637548671068224
0.55 0.24839510399726095
0.56 0.23484717665342772
0.5700000000000001 0.2222803347280335
0.58 0.21048932618817534
0.59 0.20141592920353982
0.6 0.1899580843663605
0.61 0.18030139935414424
0.62 0.16867034258338606
0.63 0.15663418632182857
0.64 0.1431980906921241
0.65 0.13217487753027082
0.66 0.1221870931746327
0.67 0.1109759520913259
0.68 0.10143018441851712
0.6900000000000001 0.09377954244658726
0.7000000000000001 0.08585810618292335
0.71 0.07618138424821001
0.72 0.06882668711656441
0.73 0.05897089998072846
0.74 0.05033881897386254
0.75 0.044668867741308994
0.76 0.0410705596107056
0.77 0.03725012189176012
0.78 0.033030391869442004
0.79 0.027249558910017645
0.8 0.02084767430425804
0.81 0.01772875012311632
0.8200000000000001 0.015187376725838263
0.8300000000000001 0.012835703001579778
0.84 0.011069381300652303
0.85 0.008511480601741884
0.86 0.007328183798772034
0.87 0.005946481665014865
0.88 0.0037702152991368186
0.89 0.0025811575498858336
0.9 0.001390682427734181
0.91 0.001390682427734181
0.92 0.001192131929266839
0.93 0.0005962436649110603
0.9400000000000001 0.00039753528125621154
0.9500000000000001 0.00019878739687903787
0.96 0.00019878739687903787
0.97 0.00019878739687903787
0.98 0.0
0.99 0.0
1.0 0.0
threshold 0.25


f1_score  (Iteración para el conjunto deentrenamiento)





________________________________________________________________________________________________________________

Variables iniciales (515) y de voluntad de pago (174)


hyperparameters = {
    "num_round": "100",                     # required
    "max_depth":"10",
    "eta":"0.3",    
    "objective": "binary:logistic",      
    "eval_metric": "auc",
    "nthread": "4",
    "seed": "1"
}

------------------------------------------------------------------------------------------------

threshold = 0.29    (este es el que maximiza el score f1 para el conjunto de entrenamiento)

------              	Train                            	Validation               	Test                     
confusion matrix    	[[245435      5]                 	[[81251   346]           	[[81160   362]           
                    	 [    29  10031]]                	 [  748  2614]]          	 [  748  2558]]          
confusion matrix pct	[[9.60606654e-01 1.95694716e-05] 	[[0.95635542 0.00407255] 	[[0.95675956 0.00426746] 
                    	 [1.13502935e-04 3.92602740e-02]]	 [0.00880425 0.03076778]]	 [0.00881784 0.03015514]]
f1 score            	0.9983081210191082               	0.8269534957291995       	0.8217153870864119       
accuracy score      	0.999866927592955                	0.9871232006026436       	0.9869146979770831       
recall score        	0.997117296222664                	0.7775133848899465       	0.7737447065940714       
precision score     	0.9995017935432443               	0.8831081081081081       	0.876027397260274        

---------------------------------------------------------------------------------------------------

threshold = 0.2

------              	Train                            	Validation               	Test                     
confusion matrix    	[[245406     34]                 	[[81085   512]           	[[80982   540]           
                    	 [    23  10037]]                	 [  616  2746]]          	 [  604  2702]]          
confusion matrix pct	[[9.60493151e-01 1.33072407e-04] 	[[0.95440153 0.00602644] 	[[0.9546612  0.00636582] 
                    	 [9.00195695e-05 3.92837573e-02]]	 [0.00725056 0.03232147]]	 [0.00712029 0.03185269]]
f1 score            	0.9971685460235458               	0.829607250755287        	0.8252901649358583       
accuracy score      	0.9997769080234834               	0.9867230075683565       	0.9865138869241288       
recall score        	0.997713717693837                	0.816775728732897        	0.8173018753781004       
precision score     	0.9966239698143183               	0.8428483732351135       	0.8334361505243677

---------------------------------------------------------------------------------------------------
threshold = 0.1
------              	Train                            	Validation               	Test                     
confusion matrix    	[[245015    425]                 	[[80648   949]           	[[80550   972]           
                    	 [     9  10051]]                	 [  431  2931]]          	 [  409  2897]]          
confusion matrix pct	[[9.58962818e-01 1.66340509e-03] 	[[0.94925788 0.01117009] 	[[0.94956854 0.01145848] 
                    	 [3.52250489e-05 3.93385519e-02]]	 [0.00507304 0.03449899]]	 [0.00482152 0.03415146]]
f1 score            	0.9788663809894819               	0.8094449047224523       	0.8075261324041813       
accuracy score      	0.9983013698630137               	0.9837568709612872       	0.9837199981138304       
recall score        	0.9991053677932406               	0.87180249851279         	0.8762855414398064       
precision score     	0.9594310805651012               	0.7554123711340206       	0.7487722925820626       


---------------------------------------------------------------------------------------------------
threshold = 0.05

------              	Train                            	Validation               	Test                     
confusion matrix    	[[243846   1594]                 	[[79902  1695]           	[[79785  1737]           
                    	 [     5  10055]]                	 [  275  3087]]          	 [  278  3028]]          
confusion matrix pct	[[9.54387476e-01 6.23874755e-03] 	[[0.94047717 0.0199508 ] 	[[0.94055029 0.02047673] 
                    	 [1.95694716e-05 3.93542074e-02]]	 [0.00323686 0.03633517]]	 [0.00327722 0.03569576]]
f1 score            	0.9263439126629509               	0.7581041257367387       	0.7503407260562507       
accuracy score      	0.9937416829745597               	0.9768123447780694       	0.9762460508322723       
recall score        	0.9995029821073559               	0.9182034503271862       	0.9159104658197217       
precision score     	0.86316422010473                 	0.6455457967377666       	0.6354669464847849 


----------------------------------------------------------------------------------------------------

f1_score  (Iteración para el conjunto deentrenamiento)


0.0 0.07576442235276395
0.01 0.6169886537871818
0.02 0.7764142934321216
0.03 0.8542436207701779
0.04 0.899400876330144
0.05 0.9263439126629509
0.06 0.9445253417257738
0.07 0.9570225120175146
0.08 0.9664952170360044
0.09 0.9731823022557846
0.1 0.9788663809894819
0.11 0.9829795559033552
0.12 0.9863080924571822
0.13 0.9886346863468636
0.14 0.9910718689883096
0.15 0.9922924901185771
0.16 0.9940599940599941
0.17 0.9949464922711059
0.18 0.9957349732195994
0.19 0.9963271788763154
0.2 0.9971685460235458
0.21 0.9973667213196203
0.22 0.9976638997962125
0.23 0.9978124689271154
0.24 0.9979114868224763
0.25 0.9981100169103752
0.26 0.9981594786847734
0.27 0.9982587930948709
0.28 0.9982584465343086
0.29 0.9983081210191082
0.3 0.9982084204240073
0.31 0.998058832312976
0.32 0.9980586390562
0.33 0.9980085631783331
0.34 0.9979085748431431
0.35000000000000003 0.9977089351529037
0.36 0.9975092159011656
0.37 0.9973593742215137
0.38 0.997159515622664
0.39 0.996959577331406
0.4 0.9968095712861416
0.41000000000000003 0.9968095712861416
0.42 0.9968095712861416
0.43 0.996709542327251
0.44 0.996709542327251
0.45 0.996509424553705
0.46 0.9964590294748392
0.47000000000000003 0.9963589206444212
0.48 0.9961085611654361
0.49 0.9957077260930325
0.5 0.9955071884984025
0.51 0.9954068896655017
0.52 0.9953065708008787
0.53 0.9951053840775147
0.54 0.9947037074048166
0.55 0.9946032380571658
0.56 0.9944524963766305
0.5700000000000001 0.9942011597680465
0.58 0.9938490773616043
0.59 0.9933960376225736
0.6 0.9929929929929929
0.61 0.9925896254756659
0.62 0.9922364137240169
0.63 0.9915797914995991
0.64 0.9910741149333065
0.65 0.9906185722169267
0.66 0.9903146484669042
0.67 0.9893510146674703
0.68 0.9886906257853731
0.6900000000000001 0.9882329276878205
0.7000000000000001 0.9872653143403635
0.71 0.9864490453881416
0.72 0.9853756933938477
0.73 0.9841462183176815
0.74 0.9833762821484514
0.75 0.9822964087000506
0.76 0.9811110548437738
0.77 0.9790429796519003
0.78 0.977434437893881
0.79 0.9752992105933282
0.8 0.9726831758999234
0.81 0.9700010238558412
0.8200000000000001 0.9658185556412233
0.8300000000000001 0.9627796680070111
0.84 0.9584303980949422
0.85 0.9536637370638098
0.86 0.9479188454298263
0.87 0.9415540007364932
0.88 0.9320594479830149
0.89 0.9225661347327836
0.9 0.908597775969623
0.91 0.8934719243249188
0.92 0.8730816623725776
0.93 0.8481135856185951
0.9400000000000001 0.8145878748600719
0.9500000000000001 0.7689672050905532
0.96 0.7016841969413434
0.97 0.6067446852711031
0.98 0.4673979280926264
0.99 0.23987402676931152
1.0 0.0

threshold = max = 0.29













